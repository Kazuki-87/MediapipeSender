# MediapipeSender

## 概要
MediapipeSenderは、MediaPipeを使用してデータを処理し、他のシステムやアプリケーションに送信するためのツールです。このプロジェクトは、リアルタイムデータ処理と通信を簡素化することを目的としています。

## 主な機能
- MediaPipeを使用したデータ処理
- データの送信機能（UDPプロトコル）
- 高速で効率的なリアルタイム通信
- CPU/GPUデバイスの動的選択
- 仮想カメラオフセットの設定

## 必要条件
- Python 3.8以上
- 必要なライブラリは`requirements.txt`に記載されています。
- Windows環境での開発を推奨
- NVIDIA GPUを使用する場合、NVIDIAドライバと`nvidia-smi`が必要

## インストール
1. このリポジトリをクローンします:
   ```bash
   git clone https://github.com/Kazuki-87/MediapipeSender.git
   cd MediapipeSender
   ```

2. 必要な依存関係をインストールします:
   ```bash
   pip install -r requirements.txt
   ```

## 使用方法
1. アプリケーションを起動するには、以下のコマンドを実行します:
   ```bash
   python main.py
   ```

2. 設定ファイルを編集して、送信先や処理内容をカスタマイズできます。

## 設定ファイルについて
アプリケーションの動作をカスタマイズするために、`config/PoseSenderApp.config`ファイルを編集できます。このファイルには以下の設定項目が含まれています:

- `camera_enum_path`: カメラデバイスを列挙する実行可能ファイルのパス。デフォルトは`../Resources/camera_enum.exe`。
- `vcam_offset`: 仮想カメラのオフセット値。デフォルトは`1`。
- `ip`: UDPデータ送信先のIPアドレス。デフォルトは`127.0.0.1`。
- `port`: UDPデータ送信先のポート番号。デフォルトは`5005`。

設定を変更するには、テキストエディタで`config/PoseSenderApp.config`を開き、必要な値を編集してください。

## 通信データについて
アプリケーションはUDPプロトコルを使用してデータを送信します。送信されるデータはJSON形式で構成され、以下の内容が含まれます:

- `pose_data`: 姿勢データ。各ランドマークの名前とx, y, z座標を含むリスト。
- `expression_data`: 顔の表情データ。各ランドマークの名前とx, y, z座標を含むリスト。
- `hand_data`: 手のランドマークデータ。各ランドマークの名前とx, y, z座標を含むリスト。
- `fingertip_data`: 指先データ。親指、人差し指、中指、薬指、小指の指先の名前とx, y, z座標を含むリスト。

例:
```json
{
    "pose_data": [["PoseLandmark_0", 0.1, 0.2, 0.3], ["PoseLandmark_1", 0.4, 0.5, 0.6]],
    "expression_data": [[["FaceLandmark_0", 0.1, 0.2, 0.3], ["FaceLandmark_1", 0.4, 0.5, 0.6]]],
    "hand_data": [[["Left_HandLandmark_0", 0.1, 0.2, 0.3], ["Left_HandLandmark_1", 0.4, 0.5, 0.6]]],
    "fingertip_data": [[["Left_Fingertip_4", 0.1, 0.2, 0.3], ["Left_Fingertip_8", 0.4, 0.5, 0.6]]]
}
```

受信側はこのデータを解析して、姿勢、表情、手の動き、指先の位置を利用できます。

## 開発者向け情報
- CPU/GPUデバイスの選択機能を追加しました。
- カメラデバイスの動的列挙機能をサポートしています。
- コードの変更を行う場合は、適切なテストを実施してください。
- プルリクエストを送る際は、詳細な説明を記載してください。

## ライセンス
このプロジェクトはMITライセンスの下で提供されています。詳細は`LICENSE`ファイルを参照してください。

## 貢献
バグ報告や機能提案は歓迎します。以下の手順で貢献できます:
1. リポジトリをフォークします。
2. 新しいブランチを作成します。
3. コードを変更します。
4. プルリクエストを送信します。

## 問い合わせ
質問やサポートが必要な場合は、以下のXまでご連絡ください:
- https://x.com/cure_kazuki
